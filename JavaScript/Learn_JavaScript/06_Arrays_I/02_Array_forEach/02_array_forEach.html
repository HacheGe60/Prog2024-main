<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arrays</title>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <div class="container">
    <header>
      <div class="navbar">
        Aprender JavaScript
      </div>
    </header>
    <main>
      <h1>Array forEach</h1>
      <p>La iteración de arrays es uno de los conceptos más importantes que utilizarás en JavaScript.</p>
      <p>Digamos que tenemos un array de notas y deseas iterar sobre cada elemento en este array. Aquí está cómo lo
        haces en
        JavaScript:</p>
      <div class="codigo">
        <p><span class="elem">const</span> grades <span class="elem">=</span> [<span class="num">10</span>, <span
            class="num">8</span>, <span class="num">13</span>];</span></p>
        <p>&nbsp;</p>
        <p>grades.<span class="func">forEach</span>(<span class="elem">function</span>(grade) {</p>
        <p><span class="comment">&nbsp;&nbsp;// do something with individual grade</span></p>
        <p>&nbsp;&nbsp;console.<span class="func">log</span>(grade);</p>
        <p>});</p>
      </div>
      <div class="notaVerde">
        <i class="fa-solid fa-circle-check fa-xl " style="color: #000333;"></i>
        <p>Siempre comienza con un <code>console.log()</code> dentro de tu <code>.forEach</code> para que puedas
          visualizar el cambio de array a elemento de
          array.
        </p>
      </div>
      <p>El método <code>.forEach(callback)</code> te permite ejecutar la función <code>callback</code> para cada
        elemento en ese array. Las
        funciones de
        devolución se explicarán con más profundidad en el siguiente capítulo. Por ahora, comencemos con una definición
        básica.</p>
      <p>Una función de devolución es una definición de función pasada como parámetro a otra función. En nuestro ejemplo
        anterior, aquí está la función de devolución:</p>
      <div class="codigo">
        <p><span class="elem">function</span>(grade) {</p>
        <p><span class="comment">&nbsp;&nbsp;// do something with individual grade</span></p>
        <p>&nbsp;&nbsp;console.<span class="func">log</span>(grade);</p>
        <p>};</p>
      </div>
      <p>Esta función de devolución <strong>recibe</strong> una <code>grade</code> y luego la registra en la consola.
        Esta es una definición de función
        porque no se está ejecutando. Solo define el comportamiento de la función. Sin embargo, esta definición de
        función se
        pasa como argumento al método <code>.forEach()</code>.</p>
      <div class="codigo">
        <p>grades.<span class="func">forEach</span>(insert_callback_here);</p>
      </div>
      <p>Una vez que combines los dos, como en pasar la definición de la función como argumento al método
        <code>.forEach()</code>, entonces
        obtienes:
      </p>
      <div class="codigo">
        <p>10</p>
        <p>8</p>
        <p>13</p>
      </div>
      <p>Entonces puedes visualizar las llamadas de función de la siguiente manera:</p>
      <div class="codigo">
        <p><span class="comment">// esta es la función de devolución <em>(callback)</em></span></p>
        <p><span class="elem">function</span>(grade) {</p>
        <p>&nbsp;&nbsp;console.<span class="func">log</span>(grade);</p>
        <p>};</p>
        <p><span class="comment">// esta es la función de devolución con grade = 10 (grades[0]) </span></p>
        <p>console.<span class="func">log</span>(grade); <span class="comment">// devolverá 10</span></p>
        <p><span class="comment">// esta es la función de devolución con grade = 8 (grades[1]) </span></p>
        <p>console.<span class="func">log</span>(grade); <span class="comment">// devolverá 8</span></p>
        <p><span class="comment">// esta es la función de devolución con grade = 13 (grades[2]) </span></p>
        <p>console.<span class="func">log</span>(grade); <span class="comment">// devolverá 13</span></p>
      </div>
      <p>Observa cómo se está llamando la definición de la función para cada elemento del array.</p>
      <p>Pero ¿quién lo está llamando y proporcionando los diferentes valores? ¡JavaScript lo está haciendo! Tú
        proporcionas la
        función de devolución (definición de función) y la pasas a <code>.forEach()</code>, ¡y JavaScript hace el resto!
      </p>
      <h2>¿Cómo sabe que es una "grade"?</h2>
      <p>Una pregunta común cuando se aprende sobre funciones de devolución es cómo sabe JavaScript que
        <code>grades</code> se
        convierte en
        <code>grade</code> en el parámetro de la función de devolución. La respuesta es que ¡no lo sabe!
      </p>
      <p>Entonces el código a continuación funciona (pero por favor no lo uses):</p>
      <div class="codigo">
        <p><span class="elem">const</span> grades <span class="elem">=</span> [<span class="num">10</span>, <span
            class="num">8</span>, <span class="num">13</span>];</span></p>
        <p>&nbsp;</p>
        <p>grades.<span class="func">forEach</span>(<span class="elem">function</span>(x) {</p>
        <p><span class="comment">&nbsp;&nbsp;// esto funciona, pero hay que tratar de evitar nombres de variables
            genéricos</span></p>
        <p>&nbsp;&nbsp;console.<span class="func">log</span>(grade);</p>
        <p>});</p>
      </div>
      <p>Entonces esto funciona porque JavaScript buscará el primer parámetro (x) y llamará a la función de devolución y
        le dará
        un valor a <code>x</code> cada vez.</p>
      <p>Aunque funciona, siempre debes dar nombres claros a las variables. ¡Más sobre eso en la próxima lección!</p>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h2>Array.prototype.forEach()</h2>
      </div>
      <p>El método <code>.forEach()</code> ejecuta la función indicada una vez por cada elemento del array.</p>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h3>Prueba</h3>
      </div>
      <div class="codigo">
        <p><span class="elem">const</span> array1 <span class="elem">=</span> [<span class="txt">'a'</span>, <span
            class="txt">'b'</span>, <span class="txt">'c'</span>];</p>
        <p>&nbsp;</p>
        <p>array1.<span class="func">forEach</span>((element) => console.<span class="func">log</span>(element));</p>
        <p>&nbsp;</p>
        <p><span class="comment">// Resultado esperado: "a"</span></p>
        <p><span class="comment">// Resultado esperado: "b"</span></p>
        <p><span class="comment">// Resultado esperado: "c"</span></p>
        <p class="prueba" onclick="prueba91()">Prueba</p>
      </div>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h3>Sintaxis</h3>
      </div>
      <div class="codigo">
        <p>arr.forEach(function callback(currentValue, index, array)</p>
        <p>{</p>
        <p>&nbsp;&nbsp;// tu iterador</p>
        <p>}[, thisArg]);</p>
      </div>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h4>Parámetros</h4>
      </div>
      <p><code>callback</code></p>
      <p>Función a ejecutar por cada elemento, que recibe tres argumentos:</p>
      <ol>
        <li>
          <p><code>currentValue</code></p>
          <p>El elemento actual siendo procesado en el array.</p>
        </li>
        <li>
          <p><code>index</code></p>
          <p>El índice del elemento actual siendo procesado en el array.</p>
        </li>
        <li>
          <p><code>array</code></p>
          <p>El vector en el que <code>forEach()</code> esta siendo aplicado.</p>
        </li>
      </ol>
      <p><code>thisArg</code></p>
      <p>Valor que se usará como <code>this</code> cuando se ejecute el <code>callback</code>.</p>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h4>Valor de retorno</h4>
      </div>
      <p><code>undefined</code></p>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h3>Descripción</h3>
      </div>
      <p><code>forEach()</code> ejecuta la función <code>callback</code> una vez por cada elemento presente en el array
        en orden ascendente. No es invocada
        para índices que han sido eliminados o que no hayan sido inicializados (Ej. sobre arrays <code>sparse</code>)
      </p>
      <p><code>callback</code> es invocada con tres argumentos:</p>
      <ol>
        <li>el valor del elemento</li>
        <li>el índice del elemento</li>
        <li>el array que está siendo recorrido</li>
      </ol>
      <p>Si un parámetro <code>thisArg</code> es proporcionado a <code>forEach</code>, será usado como el valor
        <code>this</code> para cada invocación de <code>callback</code> como
        si se llamara a <code>callback.call(thisArg, element, index, array)</code>. Si <code>thisArg</code> es
        <code>undefined</code> o <code>null</code>, el valor <code>this</code> dentro de
        la función depende si la función está o no en modo estricto (valor pasado si está en modo estricto, objeto
        global si
        está en modo no-estricto).
      </p>
      <p>El rango de elementos procesados por <code>forEach()</code> se establece antes de la primera invocación del
        <code>callback</code>. Los elementos
        que sean añadidos al vector después de que inicie la llamada a <code>forEach</code> no serán visitados por
        <code>callback</code>. Si los valores
        de los elementos existentes en el vector son modificados, el valor pasado al <code>callback</code> será el valor
        al momento de que
        forEach los visite; no se evaluarán los elementos borrados antes de ser visitados por <code>forEach</code>.
      </p>
      <p><code>forEach</code>() ejecuta la función <code>callback</code> una vez por cada elemento del array; a
        diferencia de <code>map()</code> o <code>reduce()</code> este siempre
        devuelve el valor <code>undefined</code> y no es encadenable. El típico uso es ejecutar los efectos secundarios
        al final de la
        cadena.</p>
      <p><code>foreach()</code> no muta/modifica el array desde el que es llamado (aunque <code>callback</code>, si se
        invoca, podría hacerlo).</p>
      <div class="notaNaranja">
        <i class="fa-solid fa-circle-exclamation fa-xl " style="color: #000333;"></i>
        <p><strong>Nota</strong>: No hay forma de detener o cortar un bucle <code>forEach</code> que no sea lanzar una
          excepción. Si
          necesita dicho
          comportamiento, el método <code>.forEach()</code> es la herramienta equivocada, use una simple iteración en su
          lugar. Si
          está
          probando los elementos del array para un predicado y necesita devolver un valor booleano, puede usar
          <code>every()</code> o
          <code>some()</code> en
          su lugar.
        </p>
      </div>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h3>Ejemplos</h3>
      </div>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h4>Imprimiendo el contenido de un <code>array</code></h4>
      </div>
      <p>El siguiente código imprime una línea por cada elemento en un array:</p>
      <div class="codigo">
        <p><span class="elem">function</span> <span class="func">logArrayElements</span>(element, index, array) {</p>
        <p>&nbsp;&nbsp;console.<span class="func">log</span>(<span class="txt">"a["</span> <span class="elem">+</span>
          index <span class="elem">+</span> <span class="txt">"] = "</span> <span class="elem">+</span> element);</p>
        <p>}</p>
        <p><span class="comment">// Nótese que se evita el 2° índice ya que no hay ningún elemento en esa posición del
            array</span></p>
        <p>[<span class="num">2</span>, <span class="num">5</span>, , <span class="num">9</span>].<span
            class="func">forEach</span>(logArrayElements);</p>
        <p><span class="comment">// salida:</span></p>
        <p><span class="comment">// a[0] = 2</span></p>
        <p><span class="comment">// a[1] = 5</span></p>
        <p><span class="comment">// a[3] = 9</span></p>
        <p class="prueba" onclick="prueba92()">Prueba</p>
      </div>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h4>Usando <code>thisArg</code></h4>
      </div>
      <p>El siguiente ejemplo actualiza las propiedades del objeto por cada entrada en el array:</p>
      <div class="codigo">
        <p><span class="elem">function</span> <span class="func">Counter</span>() {</p>
        <p>&nbsp;&nbsp;<span class="elem">this</span>.sum <span class="elem">=</span> <span class="num">0</span>;</p>
        <p>&nbsp;&nbsp;<span class="elem">this</span>.count <span class="elem">=</span> <span class="num">0</span>;</p>
        <p>}</p>
        <p><span class="func">Counter</span>.prototype.<span class="func">add</span> <span class="elem">=</span> <span
            class="elem">function</span> (array) {</p>
        <p>&nbsp;&nbsp;array.<span class="func">forEach</span>(<span class="elem">function</span> (entry) {</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="elem">this</span>.sum <span class="elem">+=</span> entry;</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="elem">++</span><span class="elem">this</span>.count;</p>
        <p>&nbsp;&nbsp;}, <span class="elem">this</span>);</p>
        <p><span class="comment">// ^--- Note</span></p>
        <p>};</p>
        <p>&nbsp;</p>
        <p><span class="elem">let</span> obj <span class="elem">=</span> <span class="elem">new</span> <span
            class="func">Counter</span>();</p>
        <p>obj.<span class="func">add</span>([<span class="num">2</span>, <span class="num">5</span>, <span
            class="num">9</span>]);</p>
        <p>obj.count;</p>
        <p><span class="comment">// 3</span></p>
        <p>obj.sum;</p>
        <p><span class="comment">// 16</span></p>
        <p class="prueba" onclick="prueba93()">Prueba</p>
      </div>
      <p>Nota: Dado que el parámetro <code>thisArg</code> (this) se referencia en el <code>forEach()</code>, será pasado
        al <code>callback</code> cuando se invoque,
        para utilizarse como su valor <code>this</code>.
      </p>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h4>Función que copia objetos</h4>
      </div>
      <p>El siguiente código crea una copia de un objeto dado. Hay diferentes formas de crear una copia de un objeto,
        ésta es
        sólo una de ellas y sirve para explicar cómo funciona <code>Array.prototype.forEach</code> utilizando funciones
        <code>Object.*</code> de
        ECMAScript 5.
      </p>
      <div class="codigo">
        <p><span class="elem">function</span> <span class="func">copy</span>(<span class="txt">o</span>) {</p>
        <p>&nbsp;&nbsp;<span class="elem">let</span> copy <span class="elem">=</span> Object.<span
            class="func">create</span>(Object.<span class="func">getPrototypeOf</span>(<span class="txt">o</span>));
        </p>
        <p>&nbsp;&nbsp;<span class="elem">let</span> propNames <span class="elem">=</span> Object.<span
            class="func">getOwnPropertyNames</span>(<span class="txt">o</span>);</p>
        <p>&nbsp;</p>
        <p>&nbsp;&nbsp;propNames.<span class="func">forEach</span>(<span class="elem">function</span> (name)
          {</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="elem">let</span> desc <span class="elem">=</span> Object.<span
            class="func">getOwnPropertyDescriptor</span>(<span class="txt">o</span>, <span
            class="txt">name</span>);</span>
        </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Object.<span class="func">defineProperty</span>(copy, name, desc);</p>
        <p>&nbsp;&nbsp;});</p>
        <p>&nbsp;</p>
        <p>&nbsp;&nbsp;<span class="elem">return</span> copy;</p>
        <p>}</p>
        <p>&nbsp;</p>
        <p><span class="elem">let</span> o1 <span class="elem">=</span> { a<span class="elem">:</span> <span
            class="num">1</span>, b<span class="elem">:</span> <span class="num">2</span> };</p>
        <p><span class="elem">let</span> o2 <span class="elem">=</span> <span class="func">copy</span>(o1); <span
            class="comment">// o2 ahora se parece a o1</span></p>
        <p>&nbsp;</p>
        <p>console.<span class="func">log</span>(o1);</p>
        <p>console.<span class="func">log</span>(o2);</p>
        <p class="prueba" onclick="prueba94()">Prueba</p>
      </div>
      <div class="mdn-container">
        <img class="mdn-logo" src="../../images/mdn-logo.png" alt="mdn logo">
        <h4>Si el array se modifica durante la iteración, otros elementos pueden ser omitidos
        </h4>
      </div>
      <p>El siguiente ejemplo muestra por consola "uno", "dos", "cuatro". Cuando se alcanza el registro que contiene el
        valor
        "dos", el primer registro del array se desplaza, lo que hace que los registros restantes se muevan una posición.
        Debido
        a que el elemento "cuatro" está ahora en una posición anterior en el array, "tres" se omitirá.
        <code>forEach()</code> no hace
        una
        copia del array antes de iterar.
      </p>
      <div class="codigo">
        <p><span class="elem">let</span> words <span class="elem">=</span> [<span class="txt">'uno'</span>, <span
            class="txt">'dos'</span>, <span class="txt">'tres'</span>, <span class="txt">'cuatro'</span>];</p>
        <p>words.<span class="func">forEach</span>(<span class="elem">function</span>(word) {</p>
        <p>&nbsp;&nbsp;console.<span class="func">log</span>(word);</p>
        <p>&nbsp;&nbsp;<span class="elem">if</span>(word <span class="elem">===</span> <span class="txt">'dos'</span>) {
        </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;words.<span class="func">shift</span>();</p>
        <p>&nbsp;&nbsp;}</p>
        <p>});</p>
        <p><span class="comment">// uno</span></p>
        <p><span class="comment">// dos</span></p>
        <p><span class="comment">// cuatro</span></p>
        <p class="prueba" onclick="prueba95()">Prueba</p>
      </div>
      <div class="resumen">
        <h2>Resumen</h2>
        <ul>
          <li><code>.forEach(callback)</code> itera sobre cada elemento en un array.</li>
          <li>Una función de devolución es una definición de función pasada como parámetro a otra función.</li>
          <li>Siempre comienza con un <code>console.log()</code> dentro de <code>.forEach()</code> para visualizar el
            cambio de array a elemento de array.
            (Puedes omitir esto cuando te acostumbres).</li>
          <li>El método <code>.forEach()</code> tomará tu definición de función y la llamará para cada elemento del
            array. Cada vez que se llame a
            la función de devolución, el primer parámetro representará el elemento correspondiente del array.</li>
        </ul>
      </div>
      <h2>Prácticas</h2>
      <h3>Iterar sobre los elementos de un array</h3>
      <p>Completa la función <code>loopThroughElements</code> para que itere sobre cada elemento en el array
        <code>elements</code> que recibe y lo registre
        en la consola (usando <code>console.log</code>).
      </p>
      <div class="codigo">
        <p><span class="elem">function</span> <span class="func">loopThroughElements</span>(elements) {</p>
        <p>&nbsp;&nbsp;<em>elements.<span class="func">forEach</span>(<span class="elem">function</span>(element) {</em>
        </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;<em>console.<span class="func">log</span>(element);</em></p>
        <p>&nbsp;&nbsp;});</p>
        <p>}</p>
        <p>&nbsp;</p>
        <p><span class="comment">// Ejemplos </span></p>
        <p><span class="func">loopThroughElements</span>([<span class="txt">'Sam'</span>, <span
            class="txt">'Charlie'</span>, <span class="txt">'Alex'</span>]);</p>
        <p class="prueba" onclick="prueba96()">Prueba</p>
      </div>
      <h3>Registrar identificadores de usuario</h3>
      <p>Completa la función <code>logUserIds</code> para que itere sobre cada elemento en el array <code>userIds</code>
        que recibe y lo registre en la
        consola (usando <code>console.log</code>).</p>
      <div class="codigo">
        <p><span class="elem">function</span> <span class="func">logUserIds</span>(userIds) {</p>
        <p>&nbsp;&nbsp;<em>userIds.<span class="func">forEach</span>(<span class="elem">function</span>(userId) {</em>
        </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;<em>console.<span class="func">log</span>(userId);</em></p>
        <p>&nbsp;&nbsp;});</p>
        <p>}</p>
        <p>&nbsp;</p>
        <p><span class="comment">// Ejemplos </span></p>
        <p><span class="func">logUserIds</span>([<span class="num">10</span>, <span class="num">15</span>, <span
            class="num">14</span>]);</p>
        <p class="prueba" onclick="prueba97()">Prueba</p>
      </div>
    </main>
    <footer>
      <div class="btns">
        <a class="last" href="../../06_Arrays_I/01_Arrays/01_arrays.html">Anterior</a>
        <a class="next" href="../../06_Arrays_I/03_Return_confusion/03_return_confusion.html">Siguiente</a>
      </div>
    </footer>
  </div>
  <script src="../../js/pruebas.js"></script>
</body>

</html>